---
title       : Portfolio performance evaluation 
description : The history of portfolio returns contains valuable information on how much the investor can expect to gain of lose. In the first chapter, we used time series plots. In this chapter, we will first consider the use of histogram and performance statistics to extract the relevant information embedded in the portfolio returns. 

--- type:VideoExercise lang:r xp:50 skills:1
## The distribution of portfolio returns


*** =video_link
//player.vimeo.com/video/108225030

--- type:MultipleChoiceExercise lang:r xp:50 skills:1
## Which return distribution is to be preferred?

In the right panel, you see see three normal distribution. The returns in the upper and middle panel have the same mean. The returns in the upper and bottom plot have the same standard deviation. Which distribution is to be preferred? 

*** =instructions
- Distribution in the upper plot
- Distribuion in the middle plot
- Distribution in the lower plot

*** =hint
hint

*** =pre_exercise_code
```{r}
# pec
par(mfrow=c(3,1),mar=c(3,1,1,1))
vx = seq(-0.5,0.5,0.001)
plot( vx , dnorm(vx,mean=0,sd=0.10),type="l")
abline(v=0,lty=3)
plot( vx , dnorm(vx,mean=0,sd=0.20),type="l")
abline(v=0,lty=3)
plot( vx , dnorm(vx,mean=0.10,sd=0.10),type="l")
abline(v=0.10,lty=3)
```

*** =sct
```{r}
test_mc(3) # if 3 is the correct option.
```

--- type:NormalExercise lang:r xp:100 skills:1
## Analyzing the portfolio return distribution

Plot the distribution of the equally weighted portfolio return using the function hist. Compute the mean and standard deviation. Suppose that by leveraging the portfolio, the returns are multiplied by 2. Define leveragedReturns as two times the returns. Verify that the mean and standard deviation of the leveraged returns is twice the mean and standard deviation of the original returns.

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
library(xts)
library(PerformanceAnalytics)
download.file("http://s3.amazonaws.com/assets.datacamp.com/course/portfolio-analysis/prices.rds", destfile="prices.rds")
prices<- readRDS("prices.rds") 
returns <- CalculateReturns(prices, method="simple")
returns <- returns[(-1),]
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

--- type:NormalExercise lang:r xp:100 skills:1
## Annualized mean and volatility

The mean and volatility of monthly returns corresponds to the average and standard deviation over a monthly investment horizon. Investors annualize those statistics by mutiplying the mean with 12, and the volatility with the square root of twelve. Compute the annualized mean and volatility of the portfolios.

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
library(xts)
library(PerformanceAnalytics)
download.file("http://s3.amazonaws.com/assets.datacamp.com/course/portfolio-analysis/prices.rds", destfile="prices.rds")
prices<- readRDS("prices.rds") 
returns <- CalculateReturns(prices, method="simple")
returns <- returns[(-1),]
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

--- type:NormalExercise lang:r xp:100 skills:1
## Annualized Portfolio Performance in R

Standard code (mean, sd)

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

--- type:NormalExercise lang:r xp:100 skills:1
## Annualized Portfolio Performance in R

The function table.AnnualizedReturns in PerformanceAnalytics

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

--- type:VideoExercise lang:r xp:50 skills:1
## Downside risk; skewness, kurtosis and value-at-risk


*** =video_link
//player.vimeo.com/video/108225030

--- type:NormalExercise lang:r xp:100 skills:1
## Non-normality in the return distribution

Exercise on computing skewness, kurtosis.

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

--- type:NormalExercise lang:r xp:100 skills:1
## Downside risk measures

The use of the VaR function to compute value at risk.

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

--- type:NormalExercise lang:r xp:100 skills:1
## Drawdowns

The use of the table.Drawdowns function in PerformanceAnalytics.

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

--- type:MultipleChoiceExercise lang:r xp:50 skills:1
## The effect of leverage

Suppose that by leveraging the portfolio, the returns are multiplied by 2. Different statements. Verify that the mean and standard deviation of the leveraged returns is twice the mean and standard deviation of the original returns. skewness kurtosis no effect. etc.

*** =instructions
- option 1
- option 2
- option 3

*** =hint
hint

*** =pre_exercise_code
```{r}
# pec
```

*** =sct
```{r}
test_mc(2) # if 2 is the correct option.
```

--- type:VideoExercise lang:r xp:50 skills:1
## time-variation in performance

Time-variation in the return distribution. Not all information is equally predicitve. discuss  of time-variation in average return and volatility. Use of rolling window analysis to visualize this.
*** =video_link
//player.vimeo.com/video/108225030

--- type:NormalExercise lang:r xp:100 skills:1
## Rolling annualized mean and volatility

charts.RollingPerformance on the portfolio return vector

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

--- type:MultipleChoiceExercise lang:r xp:50 skills:1
## Effect of window length choice

I show two plots, one with rolling windows of 6 months and one with rolling windows of 12 months. Which one is more persistent?

*** =instructions
- option 1
- option 2
- option 3

*** =hint
hint

*** =pre_exercise_code
```{r}
# pec
```

*** =sct
```{r}
test_mc(2) # if 2 is the correct option.
```

--- type:NormalExercise lang:r xp:100 skills:1
## Subset a zoo/xts time series using the function window and compare performance on a normal versus crisis period

window()

*** =instructions
- instruction 1
- instruction 2

*** =hint
hint comes here

*** =pre_exercise_code
```{r}
# pec
```

*** =sample_code
```{r}
# sample code
```

*** =solution
```{r}
# solution code
```

*** =sct
```{r}
# sct code
```

